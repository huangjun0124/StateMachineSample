A sample of StateMachine written in C#  
The state transfer please refer to png file in solution  